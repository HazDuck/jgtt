import{r as m,j as t}from"./vite-app.js";const N=async(e,a)=>await(await fetch(window.Shopify.routes.root+`recommendations/products.json?product_id=${e}&limit=${a}&intent=related`)).json(),v=()=>{const[e,a]=m.useState([]);return m.useEffect(()=>{const r=async(c,s)=>await N(c,s);(async()=>{const c=localStorage.getItem("jgRecentlyViewedData");if(c){let s=Object.values(JSON.parse(c));if(s=s.sort((o,d)=>d.time-o.time),(s==null?void 0:s.length)<4){const o=await r(s[0].id,10),d=[...s.sort((i,l)=>l.time-i.time)];let u=0;for(;d.length<4&&o.products.length;){const i=o.products.filter(f=>!s.find(y=>y.id===f.id));if(i.length===0)break;const{id:l,title:h,media:p,handle:g,price:j,variants:x}=i[u],w={id:l,title:h,media:p,handle:g,price:j,variants:x};d.push(w),u++}a(d)}else a(s)}})()},[]),e},R=async e=>{const a=document.querySelector("cart-drawer"),n=await(async()=>(await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:e,quantity:1}],sections:a.getSectionsToRender().map(s=>s.id)})})).json())();a.renderContents(n),n.ok||console.log("something went wrong adding to cart")},_=({variantId:e,buttonBackgroundColor:a})=>t.jsx("button",{style:{backgroundColor:a},className:"button",onClick:()=>R(e),children:"Add to cart"}),C=({price:e})=>t.jsxs("div",{className:"price",children:["Â£",e/100," GBP"]}),b=({product:{id:e,title:a,media:r,handle:n,price:c,variants:s},buttonBackgroundColor:o})=>t.jsx("li",{className:"grid__item scroll-trigger animate--slide-in",children:t.jsx("div",{className:"card-wrapper product-card-wrapper underline-links-hover",children:t.jsxs("div",{className:"card card--standard card--media",children:[t.jsx("img",{src:`${r[0].src}&_width=400`,alt:r[0].alt,className:"motion-reduce",loading:"lazy"}),t.jsx("div",{className:"card__content",children:t.jsxs("div",{className:"card__information",children:[t.jsx("h3",{className:"card__heading h5",children:t.jsx("a",{href:`products/${n}`,children:a})}),t.jsxs("div",{className:"card__information",children:[t.jsx("span",{className:"caption-large light"}),t.jsx(C,{price:c})]})]})}),t.jsx(_,{buttonBackgroundColor:o,variantId:s[0].id})]})})},e),D=({padding:e,rvData:a,buttonBackgroundColor:r})=>t.jsx("ul",{style:{padding:`${e}px`},className:"grid product-grid contains-card contains-card--product contains-card--standard grid--4-col-desktop grid--2-col-tablet-down",children:a.map(n=>t.jsx(b,{buttonBackgroundColor:r,product:n},n.id))}),S=({padding:e,button_background_color:a,text_color:r,title:n})=>{const c=v();return c.length?t.jsxs("div",{className:"page-width-desktop",children:[t.jsx("h2",{style:{color:r},children:n}),t.jsx(D,{buttonBackgroundColor:a,padding:e,rvData:c})]}):null};export{S as default};
