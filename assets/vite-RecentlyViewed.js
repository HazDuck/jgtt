import{r as u,j as t}from"./vite-app.js";const N=async(a,e)=>await(await fetch(window.Shopify.routes.root+`recommendations/products.json?product_id=${a}&limit=${e}&intent=related`)).json(),v=()=>{const[a,e]=u.useState([]);return u.useEffect(()=>{const n=async(r,s)=>await N(r,s);(async()=>{const r=localStorage.getItem("jgRecentlyViewedData");if(r){const s=Object.values(JSON.parse(r));if((s==null?void 0:s.length)<4){const o=await n(s[0].id,10),d=[...s];let i=0;for(;d.length<4&&o.products.length;){const l=o.products.filter(f=>!s.find(y=>y.id===f.id));if(l.length===0)break;const{id:h,title:m,media:p,handle:g,price:j,variants:x}=l[i],w={id:h,title:m,media:p,handle:g,price:j,variants:x};d.push(w),i++}e(d)}else e(s)}})()},[]),a},R=async a=>{const e=document.querySelector("cart-drawer"),c=await(async()=>(await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:a,quantity:1}],sections:e.getSectionsToRender().map(s=>s.id)})})).json())();e.renderContents(c),c.ok||console.log("something went wrong adding to cart")},_=({variantId:a})=>t.jsx("button",{className:"button",onClick:()=>R(a),children:"Add to cart"}),C=({price:a})=>t.jsxs("div",{className:"price",children:["Â£",a/100," GBP"]}),D=({product:{id:a,title:e,media:n,handle:c,price:r,variants:s}})=>t.jsx("li",{className:"grid__item scroll-trigger animate--slide-in",children:t.jsx("div",{className:"card-wrapper product-card-wrapper underline-links-hover",children:t.jsxs("div",{className:"card card--standard card--media",children:[t.jsx("a",{href:`products/${c}`}),t.jsx("img",{src:`${n[0].src}&_width=400`,alt:n[0].alt,className:"motion-reduce",loading:"lazy"}),t.jsx("div",{className:"card__content",children:t.jsxs("div",{className:"card__information",children:[t.jsx("h3",{className:"card__heading h5",children:e}),t.jsxs("div",{className:"card__information",children:[t.jsx("span",{className:"caption-large light"}),t.jsx(C,{price:r})]})]})}),t.jsx(_,{variantId:s[0].id})]})})},a),b=({padding:a,rvData:e})=>t.jsx("ul",{style:{padding:`${a}px`},className:"grid product-grid contains-card contains-card--product contains-card--standard grid--4-col-desktop grid--2-col-tablet-down",children:e.map(n=>t.jsx(D,{product:n},n.id))}),k=({padding:a,background_color:e,text_color:n,title:c})=>{const r=v();return r.length?t.jsxs("div",{className:"page-width-desktop",style:{backgroundColor:e},children:[t.jsx("h2",{style:{color:n},children:c}),t.jsx(b,{padding:a,rvData:r})]}):null};export{k as default};
