import{j as t,r as h}from"./vite-app.js";const v=async(e,s)=>await(await fetch(window.Shopify.routes.root+`recommendations/products.json?product_id=${e}&limit=${s}&intent=related`)).json(),N=async e=>{const s=document.querySelector("cart-drawer"),c=await(async()=>(await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:e,quantity:1}],sections:s.getSectionsToRender().map(a=>a.id)})})).json())();console.log(c,"response"),s.renderContents(c),c.ok||console.log("something went wrong adding to cart")},R=({variantId:e})=>t.jsx("button",{onClick:()=>N(e),children:"Add to cart"}),_=({price:e})=>t.jsxs("div",{className:"price",children:["Â£",e/100," GBP"]}),C=({product:{id:e,title:s,media:n,handle:c,price:r,variants:a}})=>t.jsx("li",{className:"grid__item scroll-trigger animate--slide-in",children:t.jsx("div",{className:"card-wrapper product-card-wrapper underline-links-hover",children:t.jsxs("div",{className:"card card--standard card--media",children:[t.jsx("a",{href:`products/${c}`}),t.jsx("img",{src:`${n[0].src}&_width=400`,alt:n[0].alt,className:"motion-reduce",loading:"lazy"}),t.jsx("div",{className:"card__content",children:t.jsxs("div",{className:"card__information",children:[t.jsx("h3",{className:"card__heading h5",children:s}),t.jsxs("div",{className:"card__information",children:[t.jsx("span",{className:"caption-large light"}),t.jsx(_,{price:r})]})]})}),t.jsx(R,{variantId:a[0].id})]})})},e),S=()=>{const[e,s]=h.useState([]);return h.useEffect(()=>{const n=async()=>await v(9564517761316,10);(async()=>{const r=localStorage.getItem("jgRecentlyViewedData");if(r){const a=Object.values(JSON.parse(r));if((a==null?void 0:a.length)<4){const d=await n(),o=[...a];let i=0;for(;o.length<4&&d.products.length;){const l=d.products.filter(f=>!a.find(y=>y.id===f.id));if(l.length===0)break;const{id:m,title:u,media:p,handle:g,price:j,variants:x}=l[i],w={id:m,title:u,media:p,handle:g,price:j,variants:x};o.push(w),i++}s(o)}else s(a)}})()},[]),console.log(e,"rvData"),e.length?t.jsxs("div",{className:"page-width-desktop",children:[t.jsx("h2",{children:"Recently Viewed"}),t.jsx("ul",{className:"grid product-grid contains-card contains-card--product contains-card--standard grid--4-col-desktop grid--2-col-tablet-down",children:e.map(n=>t.jsx(C,{product:n},n.id))})]}):null};export{S as default};
