import{r as u,j as t}from"./vite-app.js";const N=async(a,e)=>await(await fetch(window.Shopify.routes.root+`recommendations/products.json?product_id=${a}&limit=${e}&intent=related`)).json(),v=()=>{const[a,e]=u.useState([]);return u.useEffect(()=>{const r=async(c,s)=>await N(c,s);(async()=>{const c=localStorage.getItem("jgRecentlyViewedData");if(c){const s=Object.values(JSON.parse(c));if((s==null?void 0:s.length)<4){const d=await r(s[0].id,10),o=[...s];let i=0;for(;o.length<4&&d.products.length;){const l=d.products.filter(f=>!s.find(y=>y.id===f.id));if(l.length===0)break;const{id:h,title:m,media:p,handle:g,price:j,variants:x}=l[i],w={id:h,title:m,media:p,handle:g,price:j,variants:x};o.push(w),i++}e(o)}else e(s)}})()},[]),a},R=async a=>{const e=document.querySelector("cart-drawer"),n=await(async()=>(await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:a,quantity:1}],sections:e.getSectionsToRender().map(s=>s.id)})})).json())();e.renderContents(n),n.ok||console.log("something went wrong adding to cart")},_=({variantId:a,buttonBackgroundColor:e})=>t.jsx("button",{style:{backgroundColor:e},className:"button",onClick:()=>R(a),children:"Add to cart"}),C=({price:a})=>t.jsxs("div",{className:"price",children:["Â£",a/100," GBP"]}),b=({product:{id:a,title:e,media:r,handle:n,price:c,variants:s},buttonBackgroundColor:d})=>t.jsx("li",{className:"grid__item scroll-trigger animate--slide-in",children:t.jsx("div",{className:"card-wrapper product-card-wrapper underline-links-hover",children:t.jsxs("div",{className:"card card--standard card--media",children:[t.jsx("img",{src:`${r[0].src}&_width=400`,alt:r[0].alt,className:"motion-reduce",loading:"lazy"}),t.jsx("div",{className:"card__content",children:t.jsxs("div",{className:"card__information",children:[t.jsx("h3",{className:"card__heading h5",children:t.jsx("a",{href:`products/${n}`,children:e})}),t.jsxs("div",{className:"card__information",children:[t.jsx("span",{className:"caption-large light"}),t.jsx(C,{price:c})]})]})}),t.jsx(_,{buttonBackgroundColor:d,variantId:s[0].id})]})})},a),D=({padding:a,rvData:e,buttonBackgroundColor:r})=>t.jsx("ul",{style:{padding:`${a}px`},className:"grid product-grid contains-card contains-card--product contains-card--standard grid--4-col-desktop grid--2-col-tablet-down",children:e.map(n=>t.jsx(b,{buttonBackgroundColor:r,product:n},n.id))}),S=({padding:a,button_background_color:e,text_color:r,title:n})=>{const c=v();return c.length?t.jsxs("div",{className:"page-width-desktop",children:[t.jsx("h2",{style:{color:r},children:n}),t.jsx(D,{buttonBackgroundColor:e,padding:a,rvData:c})]}):null};export{S as default};
