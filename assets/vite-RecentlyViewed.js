import{j as t,r as m}from"./vite-app.js";const _=async(e,a)=>await(await fetch(window.Shopify.routes.root+`recommendations/products.json?product_id=${e}&limit=${a}&intent=related`)).json(),C=async e=>{const a=document.querySelector("cart-drawer"),r=await(async()=>(await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{id:e,quantity:1}],sections:a.getSectionsToRender().map(c=>c.id)})})).json())();a.renderContents(r),r.ok||console.log("something went wrong adding to cart")},b=({variantId:e})=>t.jsx("button",{className:"button",onClick:()=>C(e),children:"Add to cart"}),S=({price:e})=>t.jsxs("div",{className:"price",children:["Â£",e/100," GBP"]}),k=({product:{id:e,title:a,media:s,handle:r,price:d,variants:c}})=>t.jsx("li",{className:"grid__item scroll-trigger animate--slide-in",children:t.jsx("div",{className:"card-wrapper product-card-wrapper underline-links-hover",children:t.jsxs("div",{className:"card card--standard card--media",children:[t.jsx("a",{href:`products/${r}`}),t.jsx("img",{src:`${s[0].src}&_width=400`,alt:s[0].alt,className:"motion-reduce",loading:"lazy"}),t.jsx("div",{className:"card__content",children:t.jsxs("div",{className:"card__information",children:[t.jsx("h3",{className:"card__heading h5",children:a}),t.jsxs("div",{className:"card__information",children:[t.jsx("span",{className:"caption-large light"}),t.jsx(S,{price:d})]})]})}),t.jsx(b,{variantId:c[0].id})]})})},e),D=({padding:e,rvData:a})=>t.jsx("ul",{style:{padding:`${e}px`},className:"grid product-grid contains-card contains-card--product contains-card--standard grid--4-col-desktop grid--2-col-tablet-down",children:a.map(s=>t.jsx(k,{product:s},s.id))}),$=({padding:e,background_color:a,text_color:s,title:r})=>{const[d,c]=m.useState([]);return m.useEffect(()=>{const p=async(o,n)=>await _(o,n);(async()=>{const o=localStorage.getItem("jgRecentlyViewedData");if(o){const n=Object.values(JSON.parse(o));if((n==null?void 0:n.length)<4){const l=await p(n[0].id,10),i=[...n];let u=0;for(;i.length<4&&l.products.length;){const h=l.products.filter(v=>!n.find(R=>R.id===v.id));if(h.length===0)break;const{id:g,title:j,media:x,handle:w,price:f,variants:y}=h[u],N={id:g,title:j,media:x,handle:w,price:f,variants:y};i.push(N),u++}c(i)}else c(n)}})()},[]),d.length?t.jsxs("div",{className:"page-width-desktop",style:{backgroundColor:a},children:[t.jsx("h2",{style:{color:s},children:r}),t.jsx(D,{padding:e,rvData:d})]}):null};export{$ as default};
